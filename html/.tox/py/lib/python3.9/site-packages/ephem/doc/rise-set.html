<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rising, Transit, Setting &mdash; ngehtsim 0+untagged.61.g52db6dd documentation</title>
      <link rel="stylesheet" href="../../../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../../../../" id="documentation_options" src="../../../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../../../_static/jquery.js"></script>
        <script src="../../../../../../../_static/underscore.js"></script>
        <script src="../../../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../../../../docs/source/index.html" class="icon icon-home"> ngehtsim
          </a>
              <div class="version">
                0+untagged.61.g52db6dd
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/source/installation.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/source/packages.html">Packages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../docs/source/index.html">ngehtsim</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../docs/source/index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Rising, Transit, Setting</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../_sources/.tox/py/lib/python3.9/site-packages/ephem/doc/rise-set.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rising-transit-setting">
<h1>Rising, Transit, Setting<a class="headerlink" href="#rising-transit-setting" title="Permalink to this heading"></a></h1>
<section id="naval-observatory-risings-and-settings">
<h2>Naval Observatory Risings and Settings<a class="headerlink" href="#naval-observatory-risings-and-settings" title="Permalink to this heading"></a></h2>
<p>One of the most famous and reliable sources of astronomical almanacs is
the United States Naval Observatory.  Ship captains were amongst the
earliest consumers of precision celestial data, since on the wide and
featureless expanses of the world’s oceans you can often deduce your
position only by comparing the altitude of the stars and Sun and Moon
against the time given by the ship’s clock.</p>
<p>If you want to compute rising and setting times that match the ones
given by the Navy in their <em>Astronomical Almanac</em>, then turn off
PyEphem’s native mechanism for computing atmospheric refraction near the
horizon.  As explained above, you can do this simply by setting the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">pressure</span></code> of your observer to zero.  Then, manually set
the horizon that you want to use to one that is exactly 34 arcminutes
lower than the normal horizon, to match the value by which the Navy
reckons that an object at the horizon is refracted:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ephem</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">atlanta</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Observer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">atlanta</span><span class="o">.</span><span class="n">pressure</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">atlanta</span><span class="o">.</span><span class="n">horizon</span> <span class="o">=</span> <span class="s1">&#39;-0:34&#39;</span>
</pre></div>
</div>
<p>Let’s see if these values work!  Here are the rising and setting times
for the Sun and Moon in Atlanta today, as returned by the USNO web
site:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Sunday</span>
<span class="mi">6</span> <span class="n">September</span> <span class="mi">2009</span>      <span class="n">Eastern</span> <span class="n">Daylight</span> <span class="n">Time</span>

                 <span class="n">SUN</span>
<span class="n">Begin</span> <span class="n">civil</span> <span class="n">twilight</span>       <span class="mi">6</span><span class="p">:</span><span class="mi">50</span> <span class="n">a</span><span class="o">.</span><span class="n">m</span><span class="o">.</span>
<span class="n">Sunrise</span>                    <span class="mi">7</span><span class="p">:</span><span class="mi">15</span> <span class="n">a</span><span class="o">.</span><span class="n">m</span><span class="o">.</span>
<span class="n">Sun</span> <span class="n">transit</span>                <span class="mi">1</span><span class="p">:</span><span class="mi">36</span> <span class="n">p</span><span class="o">.</span><span class="n">m</span><span class="o">.</span>
<span class="n">Sunset</span>                     <span class="mi">7</span><span class="p">:</span><span class="mi">56</span> <span class="n">p</span><span class="o">.</span><span class="n">m</span><span class="o">.</span>
<span class="n">End</span> <span class="n">civil</span> <span class="n">twilight</span>         <span class="mi">8</span><span class="p">:</span><span class="mi">21</span> <span class="n">p</span><span class="o">.</span><span class="n">m</span><span class="o">.</span>

                 <span class="n">MOON</span>
<span class="n">Moonrise</span>                   <span class="mi">8</span><span class="p">:</span><span class="mi">17</span> <span class="n">p</span><span class="o">.</span><span class="n">m</span><span class="o">.</span> <span class="n">on</span> <span class="n">preceding</span> <span class="n">day</span>
<span class="n">Moon</span> <span class="n">transit</span>               <span class="mi">2</span><span class="p">:</span><span class="mi">37</span> <span class="n">a</span><span class="o">.</span><span class="n">m</span><span class="o">.</span>
<span class="n">Moonset</span>                    <span class="mi">9</span><span class="p">:</span><span class="mi">05</span> <span class="n">a</span><span class="o">.</span><span class="n">m</span><span class="o">.</span>
<span class="n">Moonrise</span>                   <span class="mi">8</span><span class="p">:</span><span class="mi">44</span> <span class="n">p</span><span class="o">.</span><span class="n">m</span><span class="o">.</span>
<span class="n">Moonset</span>                   <span class="mi">10</span><span class="p">:</span><span class="mi">05</span> <span class="n">a</span><span class="o">.</span><span class="n">m</span><span class="o">.</span> <span class="n">on</span> <span class="n">following</span> <span class="n">day</span>
</pre></div>
</div>
<p>To get the same results, we simply need to use the Navy’s longitude and
latitude for Atlanta (which their web page helpfully printed atop the
printout shown above) with the <code class="xref py py-class docutils literal notranslate"><span class="pre">Observer</span></code> that we constructed
above with the correct pressure and horizon settings:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">atlanta</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">atlanta</span><span class="o">.</span><span class="n">lon</span> <span class="o">=</span> <span class="s1">&#39;33.8&#39;</span><span class="p">,</span> <span class="s1">&#39;-84.4&#39;</span>  <span class="c1"># use strings for degrees!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">atlanta</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;2009/09/06 17:00&#39;</span> <span class="c1"># noon EST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">atlanta</span><span class="o">.</span><span class="n">previous_rising</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">Sun</span><span class="p">()))</span>
<span class="go">2009/9/6 11:14:57</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">atlanta</span><span class="o">.</span><span class="n">next_setting</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">Sun</span><span class="p">()))</span>
<span class="go">2009/9/6 23:56:10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">atlanta</span><span class="o">.</span><span class="n">previous_rising</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">Moon</span><span class="p">()))</span>
<span class="go">2009/9/6 00:16:32</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">atlanta</span><span class="o">.</span><span class="n">next_setting</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">Moon</span><span class="p">()))</span>
<span class="go">2009/9/7 14:05:29</span>
</pre></div>
</div>
<p>As you can see, these values, given in Universal Time, match quite
precisely the USNO values given above in Eastern Daylight Time (which,
as you can see, runs four hours earlier).  So, simply use these settings
whenever you want your results to match those of the Navy.</p>
</section>
<section id="computing-twilight">
<h2>Computing Twilight<a class="headerlink" href="#computing-twilight" title="Permalink to this heading"></a></h2>
<p>You will note that the Navy printout in the previous section contains
another kind of information, besides simple risings and settings: it
specifies the beginning and end of <em>twilight</em>, which is the time during
the morning and evening when there is light but the Sun is still below
the horizon.</p>
<p>To compute the beginning and end of twilight, ask when the Sun reaches a
position several degrees below the horizon.  There are different horizon
values you should use depending on which twilight (civil, nautical, or
astronomical) you are interested in:</p>
<ul class="simple">
<li><p>Civil twilight uses the value –6 degrees.</p></li>
<li><p>Nautical twilight uses the value –12 degrees.</p></li>
<li><p>Astronomical twilight uses the value –18 degrees.</p></li>
</ul>
<p>Note, however, that these twilight definitions specify the position of
the <em>center</em> of the Sun, while the rising and setting functions normally
pay attention to the top edge of an object instead.  To make them use
the Sun’s center, simply set the <code class="docutils literal notranslate"><span class="pre">use_center</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">True</span></code>
when doing the calculation.  For example, here is how you would use the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Observer</span></code> created in the section above to calculate the civil
twilight in Atlanta:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">atlanta</span><span class="o">.</span><span class="n">horizon</span> <span class="o">=</span> <span class="s1">&#39;-6&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">atlanta</span><span class="o">.</span><span class="n">previous_rising</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">Sun</span><span class="p">(),</span> <span class="n">use_center</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">2009/9/6 10:49:40</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">atlanta</span><span class="o">.</span><span class="n">next_setting</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">Sun</span><span class="p">(),</span> <span class="n">use_center</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">2009/9/7 00:21:23</span>
</pre></div>
</div>
<p>As you can see, these values match quite precisely the times given in
the table in the previous section for civil twilight.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Dom Pesce.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>